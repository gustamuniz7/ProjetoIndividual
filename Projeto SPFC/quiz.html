<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="Style/style-quiz.css">
    <title>Document</title>
</head>
<body>
    <div class="header">
        <div class="container">
          <ul class="navbar">
            <h5 class="agora">
              <a href="./juan.html">Juan Izquierdo</a>
            </h5>
            <h5>
              <a href="#sobrenos">Sobre Nós</a>
            </h5>
            <a href="./index-spfc.html"><img src="./Imgs/spfc-logo.png"></a>
            <h5>
              <a href="./quiz.html">Quiz</a>
            </h5>
          <div class="login">
            <h5>
              <a href="./login-spfc.html">Login</a>
            </h5>
            </ul>
          </div>
        </div>
      </div>
 <div class="banner">
    <div class="app">
        <h1>Quiz do Tricolor</h1>
        <div class="quiz">
            <h2 id="question">Question goes here</h2>
            <div id="answersbtn">
                <button class="btn">Answer 1</button>
                <button class="btn">Answer 2</button>
                <button class="btn">Answer 3</button>
                <button class="btn">Answer 4</button>
            </div>
            <button id="nextbtn">Next</button>
        </div>
    </div>
 </div>    
</body>
</html>

<script>
    const questoes = [
        {
            question: "Quantos Mundiais o São Paulo tem?",
            answers: [
                { id: 1, text: "Nenhum", correct:false},
                { id: 2, text: "1", correct:false},
                { id: 3, text: "2", correct:false},
                { id: 4, text: "3", correct:true}
            ],
        },
        {
            question: "Quem é o maior artilheiro da história do São Paulo?",
            answers: [
                { id: 1, text: "Rogério Ceni", correct:false},
                { id: 2, text: "Raí", correct:false},
                { id: 3, text: "Serginho Chulapa", correct:true},
                { id: 4, text: "Luís Fabiano", correct:false}
            ],
        },
        {
            question: "Quem é o jogador com mais jogos com a camisa do São Paulo?",
            answers: [
                { id: 1, text: "Raí", correct:false},
                { id: 2, text: "Hernanes", correct:false},
                { id: 3, text: "Calleri", correct:false},
                { id: 4, text: "Rogério Ceni", correct:true}
            ],
        },
        {
            question: "Quantos títulos brasileiros São Paulo tem?",
            answers: [
                { id: 1, text: "6", correct:true},
                { id: 2, text: "4", correct:false},
                { id: 3, text: "5", correct:false},
                { id: 4, text: "7", correct:true}
            ],
        },
        {
            question: "Quantos rebaixamentos o São Paulo tem?",
            answers: [
                { id: 1, text: "Nenhum", correct:true},
                { id: 2, text: "1", correct:false},
                { id: 3, text: "2", correct:false},
                { id: 4, text: "3", correct:false}
            ],
        },
        {
            question: "Em que ano o São Paulo ganhou seu primeiro campeonato brasileiro?",
            answers: [
                { id: 1, text: "1969", correct:false},
                { id: 2, text: "1977", correct:true},
                { id: 3, text: "2000", correct:false},
                { id: 4, text: "2006", correct:false}
            ],
        },
        {
            question: "Qual o nome oficial do estádio do São Paulo (Morumbi)?",
            answers: [
                { id: 1, text: "Palestra Itália", correct:false},
                { id: 2, text: "Parque São Jorge", correct:false},
                { id: 3, text: "Cícero Pompeu de toledo", correct:true},
                { id: 4, text: "Urbano Caldeira", correct:false}
            ],
        },
        {
            question: "Qual o nome do mascote do São Paulo?",
            answers: [
                { id: 1, text: "Santo Paulo", correct:true},
                { id: 2, text: "Super Homem", correct:false},
                { id: 3, text: "Diamantinho", correct:false},
                { id: 4, text: "Mosqueteiro", correct:false}
            ],
        },
        {
            question: "Em que ano o São Paulo foi fundado?",
            answers: [
                { id: 1, text: "1935", correct:false},
                { id: 2, text: "1920", correct:false},
                { id: 3, text: "1910", correct:false},
                { id: 4, text: "1930", correct:true}
            ],
        },
        {
            question: "Qual jogador do São Paulo já foi indicado 2x a bola de ouro?",
            answers: [
                { id: 1, text: "Raí", correct:false},
                { id: 2, text: "Rogério Ceni", correct:true},
                { id: 3, text: "Kaká", correct:false},
                { id: 4, text: "Lucas Moura", correct:false}
            ],
        },
        {
            question: "Quais equipes o São Paulo derrotou em seus 3 mundiais?",
            answers: [
                { id: 1, text: "Real Madrid, Milan, Manchester United", correct:false},
                { id: 2, text: "Barcelona, Inter, Chelsea", correct:false},
                { id: 3, text: "Real Madrid, Juventus, Liverpool", correct:false},
                { id: 4, text: "Barcelona, Milan, Liverpool", correct:true}
            ],
        },
    ]

    const questionElement = document.getElementById("question")
    const answerButtons = document.getElementById("answersbtn")
    const nextButton = document.getElementById("nextbtn")

    let indexpergunta = 0
    let pontuacao = 0

    function iniciar(){
    let indexpergunta = 0
    let pontuacao = 0

    nextButton.innerHTML = "Próxima"
    showQuestion()
    }

    // resetState garante que o botão continua escondido e os botoes somem
    function resetState(){
        nextButton.style.display = "none"
        
        while(answerButtons.firstChild) {
            answerButtons.removeChild(answerButtons.firstChild)
        }
    }

    function showQuestion(){
        resetState()
        let perguntaAtual = questions[indexpergunta]
        let questionNo = indexpergunta + 1  
        // coloca o numero 1 antes da questao
        questionElement.innerHTML = questionNo + ". " + perguntaAtual.question

        perguntaAtual.answers.forEach((answer)=> {
            const button = document.createElement("button")

            button.dataset.id = answer.id
            button.addEventListener("click", selectAnswer)
            // colocando o texto no botao
            button.innerHTML = answer.text
            answerButtons.appendChild(button)

            // readicionar a classe para css
            button.classList.add("btn")
        });

        function selectAnswer(e){
            answers = questions[indexpergunta].answers
            // pegando a resposta correta
            const correctAnswer = answer.filter((answer) => answer.correct == true)[0]

            // pegando a resposta selecionada e comparando ao id da correta
            const selectedBtn = e.target
            const isCorrect = selectedBtn.dataset.id == correctAnswer

            if(isCorrect){
                selectedBtn.classList.add("correct")
                score++
            }
            else{
                selectedBtn.classList.add("incorrect")
            }
            Array.from(answerButtons.children).forEach((button) => {
                button.disabled = true
            })
            nextButton.style.display = "block"
        }
    }
    function handleNextButton (){
        indexpergunta++
        if(indexpergunta < question.length){
            showQuestion()
        }
    }

    nextButton.addEventListener("click", () => {
        // verificar se ja foi todas as perguntas
        if(indexpergunta < question.length){
            bandleNextButton()
        }
        else{
            startQuiz()
        }
    })
</script>